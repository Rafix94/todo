<app-header></app-header>
<div *ngIf="!isLoading; else loading" class="content-container">
  <div class="task-header">
    <h2>Task Details</h2>
    <p><strong>Title:</strong> {{ task.title }}</p>
    <p><strong>Description:</strong> {{ task.description }}</p>
  </div>

  <h3>Comments</h3>
  <table class="comments-table">
    <thead>
    <tr>
      <th>Author</th>
      <th>Comment</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let comment of comments">
      <td>{{ comment.author }}</td>
      <td>{{ comment.text }}</td>
    </tr>
    </tbody>
  </table>

  <h3>Uploaded Files</h3>
  <ul class="files-list">
    <li *ngFor="let file of files">
      <a [href]="file.url" target="_blank">{{ file.name }}</a>
    </li>
  </ul>

  <form [formGroup]="commentForm" class="comment-form">
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Add a Comment</mat-label>
      <textarea matInput formControlName="comment" rows="3"></textarea>
    </mat-form-field>

    <input type="file" (change)="onFileSelect($event)" />
    <button mat-raised-button color="primary" (click)="submitComment()">Submit</button>
  </form>
</div>

<ng-template #loading>
  <div class="loading-container">
    <mat-spinner></mat-spinner>
  </div>
</ng-template>
